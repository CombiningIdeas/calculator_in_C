\doxysection{backend/src/calculator/calculator.h File Reference}
\hypertarget{calculator_8h}{}\label{calculator_8h}\index{backend/src/calculator/calculator.h@{backend/src/calculator/calculator.h}}


Заголовочный файл арифметического парсера выражений.  


This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=332pt]{calculator_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
long double \mbox{\hyperlink{calculator_8h_aae179b3c6bba167d336fece0b4737a88}{parse\+\_\+number}} (const char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}str)
\begin{DoxyCompactList}\small\item\em Парсит и возвращает число (long double) из строки. \end{DoxyCompactList}\item 
long double \mbox{\hyperlink{calculator_8h_aaed902af6c7911e2f5a6d6f76dea8ef1}{parse\+\_\+factor}} (const char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}str)
\begin{DoxyCompactList}\small\item\em Парсит один множитель\+: либо число, либо выражение в скобках. \end{DoxyCompactList}\item 
long double \mbox{\hyperlink{calculator_8h_af1d4645a0a6f288f597f8cd3e11005aa}{parse\+\_\+partial\+\_\+expression}} (const char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}str)
\begin{DoxyCompactList}\small\item\em Парсит цепочку операций умножения и деления. \end{DoxyCompactList}\item 
long double \mbox{\hyperlink{calculator_8h_acfc6682a3d951235c3fb63815b820cd0}{parse\+\_\+expression}} (const char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}str)
\begin{DoxyCompactList}\small\item\em Парсит полное выражение с учетом приоритетов операций. \end{DoxyCompactList}\item 
long double \mbox{\hyperlink{calculator_8h_a9c963211521f085da15c5f9a3997fb6a}{calculate}} (const char \texorpdfstring{$\ast$}{*}input)
\begin{DoxyCompactList}\small\item\em Главная функция вычисления выражения. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{calculator_8h_acba6b97fd1f0544fdc4fbf83fa917e8f}{division\+\_\+by\+\_\+zero\+\_\+detected}}
\begin{DoxyCompactList}\small\item\em Глобальный флаг, указывающий на попытку деления на ноль. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Заголовочный файл арифметического парсера выражений. 

Содержит объявления функций для пошагового парсинга и вычисления арифметических выражений. Поддерживаются операции\+: {\ttfamily +}, {\ttfamily -\/}, {\ttfamily \texorpdfstring{$\ast$}{*}}, {\ttfamily /}, а также скобки.

Основная точка входа\+: функция {\ttfamily \doxylink{calculator_8h_a9c963211521f085da15c5f9a3997fb6a}{calculate()}}, которая принимает строку с выражением и возвращает результат типа {\ttfamily long double}.

Реализация основана на рекурсивном спуске.

\begin{DoxySeeAlso}{See also}
\doxylink{calculator_8c}{calculator.\+c} 
\end{DoxySeeAlso}


\doxysubsection{Function Documentation}
\Hypertarget{calculator_8h_a9c963211521f085da15c5f9a3997fb6a}\label{calculator_8h_a9c963211521f085da15c5f9a3997fb6a} 
\index{calculator.h@{calculator.h}!calculate@{calculate}}
\index{calculate@{calculate}!calculator.h@{calculator.h}}
\doxysubsubsection{\texorpdfstring{calculate()}{calculate()}}
{\footnotesize\ttfamily long double calculate (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{input }\end{DoxyParamCaption})}



Главная функция вычисления выражения. 

Принимает строку с арифметическим выражением, например {\ttfamily "{}3 + 5 \texorpdfstring{$\ast$}{*} (2 -\/ 1)"{}}, и возвращает вычисленный результат.


\begin{DoxyParams}{Parameters}
{\em input} & Строка с арифметическим выражением. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Результат вычисления выражения (тип {\ttfamily long double}). 
\end{DoxyReturn}
\Hypertarget{calculator_8h_acfc6682a3d951235c3fb63815b820cd0}\label{calculator_8h_acfc6682a3d951235c3fb63815b820cd0} 
\index{calculator.h@{calculator.h}!parse\_expression@{parse\_expression}}
\index{parse\_expression@{parse\_expression}!calculator.h@{calculator.h}}
\doxysubsubsection{\texorpdfstring{parse\_expression()}{parse\_expression()}}
{\footnotesize\ttfamily long double parse\+\_\+expression (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{str }\end{DoxyParamCaption})}



Парсит полное выражение с учетом приоритетов операций. 

Сначала вызывает {\ttfamily \doxylink{calculator_8h_af1d4645a0a6f288f597f8cd3e11005aa}{parse\+\_\+partial\+\_\+expression()}} (для {\ttfamily \texorpdfstring{$\ast$}{*}} и {\ttfamily /}), затем обрабатывает {\ttfamily +} и {\ttfamily -\/}.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em str} & Указатель на текущую позицию в строке. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Результат вычисленного выражения. 
\end{DoxyReturn}
\Hypertarget{calculator_8h_aaed902af6c7911e2f5a6d6f76dea8ef1}\label{calculator_8h_aaed902af6c7911e2f5a6d6f76dea8ef1} 
\index{calculator.h@{calculator.h}!parse\_factor@{parse\_factor}}
\index{parse\_factor@{parse\_factor}!calculator.h@{calculator.h}}
\doxysubsubsection{\texorpdfstring{parse\_factor()}{parse\_factor()}}
{\footnotesize\ttfamily long double parse\+\_\+factor (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{str }\end{DoxyParamCaption})}



Парсит один множитель\+: либо число, либо выражение в скобках. 

Если текущий символ — `'(\textquotesingle{}{\ttfamily , вызывается рекурсивный разбор подвыражения. В противном случае вызывается}\doxylink{calculator_8h_aae179b3c6bba167d336fece0b4737a88}{parse\+\_\+number()}\`{}.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em str} & Указатель на текущую позицию в строке. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Значение множителя. 
\end{DoxyReturn}
\Hypertarget{calculator_8h_aae179b3c6bba167d336fece0b4737a88}\label{calculator_8h_aae179b3c6bba167d336fece0b4737a88} 
\index{calculator.h@{calculator.h}!parse\_number@{parse\_number}}
\index{parse\_number@{parse\_number}!calculator.h@{calculator.h}}
\doxysubsubsection{\texorpdfstring{parse\_number()}{parse\_number()}}
{\footnotesize\ttfamily long double parse\+\_\+number (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{str }\end{DoxyParamCaption})}



Парсит и возвращает число (long double) из строки. 

Использует {\ttfamily sscanf()} для извлечения числа и смещает указатель в строке на количество считанных символов.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em str} & Указатель на строку. После вызова будет указывать на следующий символ. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Значение числа, считанного из строки. 
\end{DoxyReturn}
\Hypertarget{calculator_8h_af1d4645a0a6f288f597f8cd3e11005aa}\label{calculator_8h_af1d4645a0a6f288f597f8cd3e11005aa} 
\index{calculator.h@{calculator.h}!parse\_partial\_expression@{parse\_partial\_expression}}
\index{parse\_partial\_expression@{parse\_partial\_expression}!calculator.h@{calculator.h}}
\doxysubsubsection{\texorpdfstring{parse\_partial\_expression()}{parse\_partial\_expression()}}
{\footnotesize\ttfamily long double parse\+\_\+partial\+\_\+expression (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{str }\end{DoxyParamCaption})}



Парсит цепочку операций умножения и деления. 

Использует {\ttfamily \doxylink{calculator_8h_aaed902af6c7911e2f5a6d6f76dea8ef1}{parse\+\_\+factor()}} для получения первого значения, затем обрабатывает {\ttfamily \texorpdfstring{$\ast$}{*}} и {\ttfamily /} в приоритетном порядке.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em str} & Указатель на текущую позицию в строке. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Результат выражения с операциями {\ttfamily \texorpdfstring{$\ast$}{*}} и {\ttfamily /}. 
\end{DoxyReturn}


\doxysubsection{Variable Documentation}
\Hypertarget{calculator_8h_acba6b97fd1f0544fdc4fbf83fa917e8f}\label{calculator_8h_acba6b97fd1f0544fdc4fbf83fa917e8f} 
\index{calculator.h@{calculator.h}!division\_by\_zero\_detected@{division\_by\_zero\_detected}}
\index{division\_by\_zero\_detected@{division\_by\_zero\_detected}!calculator.h@{calculator.h}}
\doxysubsubsection{\texorpdfstring{division\_by\_zero\_detected}{division\_by\_zero\_detected}}
{\footnotesize\ttfamily int division\+\_\+by\+\_\+zero\+\_\+detected\hspace{0.3cm}{\ttfamily [extern]}}



Глобальный флаг, указывающий на попытку деления на ноль. 

Используется в процессе вычисления арифметического выражения для сигнализации об ошибке деления на 0. Устанавливается в {\ttfamily 1}, если в выражении встречается деление на 0 (в том числе в скобках), и сбрасывается в {\ttfamily 0} перед каждым вызовом функции {\ttfamily \doxylink{calculator_8h_a9c963211521f085da15c5f9a3997fb6a}{calculate()}}.

\begin{DoxyNote}{Note}
Значение флага должно проверяться только после вызова {\ttfamily \doxylink{calculator_8h_a9c963211521f085da15c5f9a3997fb6a}{calculate()}}.
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\doxylink{calculator_8h_a9c963211521f085da15c5f9a3997fb6a}{calculate()} 
\end{DoxySeeAlso}
